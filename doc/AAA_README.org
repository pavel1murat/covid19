#
* *strategy*                                                                  
  - scrape url's to local disk, see : file:data/, parse url's starting from local files
  - write data in a form of associative arrays, that will make it easier to analyze

** world      : https://www.worldometers.info/coronavirus/
   - urls        : file:data/world/html 
   - parsed files: file:data/world/txt
   #
   - starting from Mar 17 use 'yesterday' table (it is more stable)

** USA        : https://www.worldometers.info/coronavirus/country/us/   

   - urls        : file:data/world/html 
   - parsed files: file:data/world/txt
  
   - starting from Mar 18 use 'yesterday' table (it is more stable)
** Canada     : https://www.canada.ca/en/public-health/services/diseases/2019-novel-coronavirus-infection.html

   - urls        : file:data/canada/html 
   - parsed files: file:data/canada/txt

* data format: comma-separated associative array things                       

  uts    : UNIX time stamp
  country: 
  state  : or province, for Canada
  ac     : active cases - normally, ac = totc-totr-totd
  amin   : minimal age
  amax   : maximal age
  id     : record ID - can imagine several formats, 
           1: normal
           2: not defined yet
  lab    : state / government / private
  newc   : today's cases
  newd   : today's deaths
  sex    : a  m   f
  tests  : number of tests
  time   : RUBY DateTime object (for convenience)
  totc   : total number of cases up to now
  totd   : total number of deaths reported up to now
  totr   : total number of recovered cases
  trans  : transmission type 
           all       
	   travel    travel-related
	   p2p       person to person
	   comm      community

  *example*:

rt:1, time:2020-03-20T18:58:00+00:00, uts:1584730680, country:usa, state:New_York,     county:all, totc: 8398, newc: 3031, totd:  46, newd: 12, totr:0, ac: 8352

* *------------------------------------------------------------------------------*
* setup environment and run:                                                  
  export RUBYLIB=:/projects/covid19/scripts
  export PATH=$PATH:/projects/products/chromedriver/bin

  load 'collect_world_data.rb'
  dp = WorldDataParser.new
  
* URL's:                                                                      
** CDC  : 
** COVID-19 testing      
   https://ourworldindata.org/coronavirus-testing-source-data : old , but has links to country testing info
   

** world: https://www.worldometers.info/coronavirus/  (use yesterday) 
** Norway: https://www.fhi.no/en/id/infectious-diseases/coronavirus/daily-reports/daily-reports-COVID19/
*** Wednesday 1 April 2020:         
    total of 4665 people with confirmed COVID-19. Updated on the 31.03.2020 at 24:00.  
    32 deaths have been notified to the NIPH (as of 01.04.2020 at 08:00). 
    The average age is 84 years (from 62 to 95 years).  
    A total of 94 265 have been tested for coronavirus (SARS-CoV2) (as of 31.03.2020 at 15:00). 
    An average of 4.8 % have tested positive to date.

** USA:   https://www.worldometers.info/coronavirus/country/us/ (use yesterday)  

*** AK : http://dhss.alaska.gov/dph/Epi/id/Pages/COVID-19/monitoring.aspx
*** AL : http://www.alabamapublichealth.gov/infectiousdiseases/2019-coronavirus.html                        
    search for "Coronavirus Disease"
    dashboard: https://alpublichealth.maps.arcgis.com/apps/opsdashboard/index.html#/6d2771faa9da4a2786a509d82c8cf0f7
*** AR : https://adem.maps.arcgis.com/apps/opsdashboard/index.html#/f533ac8a8b6040e5896b05b47b17a647                        
    https://www.healthy.arkansas.gov/programs-services/topics/novel-coronavirus
*** AZ : https://www.azdhs.gov/                                                                             
         dynamic HTMLs
*** CA : 
*** CO : 
*** CT : https://portal.ct.gov/Coronavirus                                                                  
    search for Latest COVID-19 Testing in Connecticut

*** DC : https://coronavirus.dc.gov/page/coronavirus-data                                                   
    one page with the by date statistics, add PHL+commercial, no deaths so far

*** DE : 
*** FL : https://floridahealthcovid19.gov/
*** GA : https://dph.georgia.gov/covid-19-daily-status-report                                               
*** HI : 
*** IA :
*** ID : https://coronavirus.idaho.gov/                                                                     
    (only state summary)
*** IL : http://www.dph.illinois.gov/topics-services/diseases-and-conditions/diseases-a-z-list/coronavirus  
    *only state summary* 

*** IN : https://coronavirus.in.gov/2393.htm
*** KS :
*** KY : 
*** LA :
*** MA : https://www.mass.gov/doc/covid-19-cases-in-massachusetts-as-of-march-19-2020-x-updated4pm/download 
    local: 
         https://www.mass.gov/doc/covid-19-cases-in-massachusetts-as-of-march-18-2020/download
	 local: file:./
    (this is PDF)
*** MD : 
*** ME : https://www.maine.gov/dhhs/mecdc/infectious-disease/epi/airborne/coronavirus.shtml                 
*** MI : from Mar 27: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html  
    data by county, sex, age
*** MN : 
*** MO : 
*** MS : https://msdh.ms.gov/msdhsite/_static/14,0,420.html\#public   Mississippi
*** MT :
*** NC :
*** ND :
*** NE :
*** NJ : https://www.nj.gov/health/cd/topics/covid2019_dashboard.shtml                          
    
    <2020-03-21 Sat> dasboard frame: https://maps.arcgis.com/apps/opsdashboard/index.html#/ec4bffd48f7e495182226eee7962b422

*** NH : https://www.nh.gov/covid19/  (only summary plus PDF map)                               
*** NM : 
*** NY : *doesn't seem to be available easily*  
*** NV :
*** OH : https://coronavirus.ohio.gov/wps/portal/gov/covid-19/home/dashboard                                                                 
    *no statistics on testing*
*** OK :
*** OR : https://govstatus.egov.com/OR-OHA-COVID-19                                  
*** PA :
*** RI :
*** SC : https://www.scdhec.gov/infectious-diseases/viruses/coronavirus-disease-2019-covid-19/monitoring-testing-covid-19  
*** SD :
*** TN : 
*** TX : https://www.dshs.state.tx.us/news/updates.shtm#coronavirus
*** UT :
*** VA : http://www.vdh.virginia.gov/coronavirus/
*** VT : https://www.healthvermont.gov/response/infectious-disease/2019-novel-coronavirus       
    search for  <h3>COVID-19 Activity in Vermont</h3>

*** WA : https://www.doh.wa.gov/emergencies/coronavirus
*** WV : https://dhhr.wv.gov/COVID-19/Pages/default.aspx
*** WY : 
* *------------------------------------------------------------------------------*
* data: file:datag
* *------------------------------------------------------------------------------*
* *WORK LOG*                                                                  
*** <2020-04-01 Wed> *TCovid19Sim*

    need to fix a memory management error - when the 2nd person goes to travel,
    its gets to the 3rd place in the fListOfPeople... thus nullptr's ... 

*** <2020-03-31 Tue> *for the TCovid19Sim simulation*                              

  c = new TCovid19Sim()
  c->Init()
  c->Run(101)

  infected ones (red) don't move
  blue ones get stuck to the external radius

*** <2020-03-30 Mon> *plot_hist operational instructions*                          

from importlib import *
import Covid19Data
ddir = '/projects/covid19/data/CSSEGISandData/csse_covid_19_data/csse_covid_19_daily_reports'
data = Covid19Data.Covid19Data(ddir);

import ana
a = ana.Ana(); a.fData=data;

import plot_hist

countries='US,Israel,Russia'
plot_hist.plot_countries(a,countries,'totc')

states='US:New_York,US:New_Jersey,US:Washington,US:Minnesota,US:Florida,US:Illinois,US:Wisconsin'
plot_hist.plot_countries(a,states,'totc',logy=1,miny=0.5)

states='US:Pennsylvania,US:Kentucky,US:North_Carolina,US:South_Carolina,US:Tennessee,US:Florida,US:Louisiana'
plot_hist.plot_countries(a,states,'totc',logy=1,miny=0.5)

states='US:Georgia,US:Virginia,US:West_Virginia,US:Texas,US:New_Mexico,US:Ohio,US:Indiana'
plot_hist.plot_countries(a,states,'totc',logy=1,miny=0.5)

*** <2020-03-27 Fri>  *switch to JHU data*                                         
  sometimes, the csv files data have 

*** <2020-03-25 Wed> *totc fits:*                                                  

      USA    : 3.2e-6  in the beginning, 3.98 after approx Mar 15 - Mar 23
      Israel : 2.9e-6  after Mar 04
      Russia : 2.8e-6  after Mar 11
      Norway : 1.2e-6  after Mar 12
      Sweden : 1.1e-6  after Mar 12
      Denmark: 0.85e-6 after Mar 12

*** <2020-03-23 Mon> *delete data/world/txt/2020-03-17T23:47:53+00:00_world.txt* - 
  'todays' data there are superseded by yesterday's data from Mar 18 - first day 
  when yesterday's data were available


  USA: tot_deaths exponential:  (1.8 --> -3.0)e-6 change - around N(deaths)= 50

  Italy: (3.46--> 1.9)e-6 change - around N(deaths) ~ 1000
* *------------------------------------------------------------------------------*
